{"ast":null,"code":"var _jsxFileName = \"/Users/omeryer/Downloads/react-flask-socketio-master/socketapp/src/socketDashboard.js\";\nimport React, { useEffect, useState } from \"react\";\nimport io from 'socket.io-client';\n\nclass Dashboard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      socketData: \"\",\n      socketStatus: \"On\"\n    };\n\n    this.handleEmit = () => {\n      if (this.state.socketStatus === \"On\") {\n        this.socket.emit(\"message\", {\n          'data': 'Stop Sending',\n          'status': 'Off'\n        });\n        this.setState({\n          'socketStatus': \"Off\"\n        });\n      } else {\n        this.socket.emit(\"message\", {\n          'data': 'Start Sending',\n          'status': 'On'\n        });\n        this.setState({\n          'socketStatus': \"On\"\n        });\n      }\n\n      console.log(\"Emit Clicked\");\n    };\n  }\n\n  componentWillUnmount() {\n    this.socket.close();\n    console.log(\"component unmounted\");\n  }\n\n  componentDidMount() {\n    var sensorEndpoint = \"http://localhost:5015\";\n    this.socket = io.connect(sensorEndpoint, {\n      reconnection: true,\n      transports: ['websocket']\n    });\n    console.log(\"component mounted\");\n    this.socket.on(\"responseMessage\", message => {\n      this.setState({\n        'socketData': message.temperature\n      });\n      console.log(\"responseMessage\", message);\n    });\n    useEffect(() => {\n      socket.on('Data', payload => {});\n    }, []);\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Data: \", this.state.socketData), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \"Status: \", this.state.socketStatus), React.createElement(\"div\", {\n      onClick: this.handleEmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \" Start/Stop\"));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/omeryer/Downloads/react-flask-socketio-master/socketapp/src/socketDashboard.js"],"names":["React","useEffect","useState","io","Dashboard","Component","state","socketData","socketStatus","handleEmit","socket","emit","setState","console","log","componentWillUnmount","close","componentDidMount","sensorEndpoint","connect","reconnection","transports","on","message","temperature","payload","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,EAAP,MAAe,kBAAf;;AAIA,MAAMC,SAAN,SAAwBJ,KAAK,CAACK,SAA9B,CAAwC;AAAA;AAAA;AAAA,SACpCC,KADoC,GAC5B;AACJC,MAAAA,UAAU,EAAE,EADR;AAEJC,MAAAA,YAAY,EAAC;AAFT,KAD4B;;AAAA,SA4BpCC,UA5BoC,GA4BzB,MAAI;AACX,UAAG,KAAKH,KAAL,CAAWE,YAAX,KAA0B,IAA7B,EAAkC;AAClC,aAAKE,MAAL,CAAYC,IAAZ,CAAiB,SAAjB,EAA4B;AAAC,kBAAO,cAAR;AAAwB,oBAAS;AAAjC,SAA5B;AACA,aAAKC,QAAL,CAAc;AAAC,0BAAe;AAAhB,SAAd;AACH,OAHG,MAIA;AACA,aAAKF,MAAL,CAAYC,IAAZ,CAAiB,SAAjB,EAA4B;AAAC,kBAAO,eAAR;AAAyB,oBAAS;AAAlC,SAA5B;AACA,aAAKC,QAAL,CAAc;AAAC,0BAAe;AAAhB,SAAd;AACC;;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH,KAtCmC;AAAA;;AAMpCC,EAAAA,oBAAoB,GAAG;AACnB,SAAKL,MAAL,CAAYM,KAAZ;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACH;;AACDG,EAAAA,iBAAiB,GAAG;AAChB,QAAIC,cAAc,GAAG,uBAArB;AACI,SAAKR,MAAL,GAAcP,EAAE,CAACgB,OAAH,CAAWD,cAAX,EAA2B;AACzCE,MAAAA,YAAY,EAAE,IAD2B;AAEzCC,MAAAA,UAAU,EAAE,CAAC,WAAD;AAF6B,KAA3B,CAAd;AAIJR,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACI,SAAKJ,MAAL,CAAYY,EAAZ,CAAe,iBAAf,EAAkCC,OAAO,IAAI;AACzC,WAAKX,QAAL,CAAc;AAAC,sBAAcW,OAAO,CAACC;AAAvB,OAAd;AAEAX,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BS,OAA/B;AACH,KAJD;AAKJtB,IAAAA,SAAS,CAAC,MAAM;AACZS,MAAAA,MAAM,CAACY,EAAP,CAAU,MAAV,EAAkBG,OAAO,IAAI,CAAG,CAAhC;AACH,KAFQ,EAEN,EAFM,CAAT;AAIH;;AAcDC,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAY,KAAKpB,KAAL,CAAWC,UAAvB,CADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAc,KAAKD,KAAL,CAAWE,YAAzB,CAFA,EAGA;AAAK,MAAA,OAAO,EAAE,KAAKC,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHA,CADJ;AAOH;;AAhDmC;;AAkDxC,eAAeL,SAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport io from 'socket.io-client';\n\n\n\nclass Dashboard extends React.Component {\n    state = {\n        socketData: \"\",\n        socketStatus:\"On\"\n    }\n\n    componentWillUnmount() {\n        this.socket.close()\n        console.log(\"component unmounted\")\n    }\n    componentDidMount() {\n        var sensorEndpoint = \"http://localhost:5015\"\n            this.socket = io.connect(sensorEndpoint, {\n            reconnection: true,\n            transports: ['websocket']\n        });\n        console.log(\"component mounted\")\n            this.socket.on(\"responseMessage\", message => {\n                this.setState({'socketData': message.temperature})\n                \n                console.log(\"responseMessage\", message)\n            })\n        useEffect(() => {\n            socket.on('Data', payload => { });\n        }, []);\n            \n    }\n    \n    handleEmit=()=>{\n        if(this.state.socketStatus===\"On\"){\n        this.socket.emit(\"message\", {'data':'Stop Sending', 'status':'Off'})\n        this.setState({'socketStatus':\"Off\"})\n    }\n    else{        \n        this.socket.emit(\"message\", {'data':'Start Sending', 'status':'On'})\n        this.setState({'socketStatus':\"On\"})\n        }\n        console.log(\"Emit Clicked\")\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n            <div>Data: {this.state.socketData}</div>\n            <div>Status: {this.state.socketStatus}</div>\n            <div onClick={this.handleEmit}> Start/Stop</div>\n            </React.Fragment>\n        )\n    }\n}\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}